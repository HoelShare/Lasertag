https://github.com/notro/fbtft/wiki

---------------- muss jedes mal per modprobe gestartet werden ----------------

--- install ---

FBTFT drivers as loadable modules (muss jedes mal per modprobe gestartet werden):
sudo apt-get update
sudo REPO_URI=https://github.com/notro/rpi-firmware rpi-update
sudo reboot

--- starten ---

sudo modprobe fbtft_device custom name=fb_ili9341 width=240 height=320 rotate=180 speed=80000000 buswidth=8 bgr=1 gpios=reset:25,led:18,dc:24 cs=0
dmesg
lsmod
ls /dev/fb*

---------------- bootkonsole wird direkt angezeigt ----------------

--- install ---
 
FBTFT drivers built into the kernel proper (bootkonsole wird direkt angezeigt):
sudo apt-get update
sudo REPO_URI=https://github.com/notro/rpi-firmware BRANCH=builtin rpi-update

muss alles inkl dem was schon drin ist in einer zeile stehen:
sudo nano /boot/cmdline.txt
dwc_otg.lpm_enable=0 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline rootwait fbtft_device.custom fbtft_device.name=fb_ili9341 fbtft_device.width=240 fbtft_device.height=320 fbtft_device.rotate=180 fbtft_device.speed=80000000 fbtft_device.buswidth=8 fbtft_device.bgr=1 fbtft_device.gpios=reset:25,led:18,dc:24 fbtft_device.cs=0 fbtft_device.debug=0 fbtft_device.verbose=0 fbcon=map:10 fbcon=font:ProFont6x11 logo.nologo

cat /proc/cmdline | wc -c

---------------- bildschirm nicht schlafen schicken ----------------

view:
cat /sys/module/kernel/parameters/consoleblank

change:
sudo nano /etc/kbd/config
BLANK_TIME=0

---------------- testen ----------------

FRAMEBUFFER=/dev/fb1 startx
./fbtest/fbtest --fbdev /dev/fb1
con2fbmap 1 1
con2fbmap 1 0
cat /dev/urandom > /dev/fb1
cat /dev/zero > /dev/fb1

---------------- tester installieren ----------------

sudo su
apt-get install libnetpbm10-dev
git clone https://git.kernel.org/pub/scm/linux/kernel/git/geert/fbtest.git
cd fbtest
make
./fbtest --fbdev /dev/fb1
cd ..

------ beim start laden ------

export SDL_FBDEV=/dev/fb1
export SDL_VIDEODRIVER=fbcon



------ notizen ------

console blanking:
https://github.com/notro/fbtft/wiki/Boot-console

https://github.com/notro/fbtft/blob/master/fbtft_device.c

display: ili9341
touch: xpt2046

gcc a.c `pkg-config --libs --cflags directfb`

------ speed ------
speed=100000000
weiss
speed=90000000
weiss
speed=80000000
Benchmarking... 10x10 squares: 22.47 Mpixels/s
Benchmarking... 20x20 squares: 47.16 Mpixels/s
Benchmarking... 50x50 squares: 97.79 Mpixels/s
Benchmarking... 100x100 squares: 132.10 Mpixels/s
Benchmarking... 200x200 squares: 144.01 Mpixels/s



--------- wenn x nicht will

In der Datei
/usr/share/X11/xorg.conf.d/99-fbturbo.conf

# This is a minimal sample config file, which can be copied to
# /etc/X11/xorg.conf in order to make the Xorg server pick up
# and load xf86-video-fbturbo driver installed in the system.
#
# When troubleshooting, check /var/log/Xorg.0.log for the debugging
# output and error messages.
#
# Run "man fbturbo" to get additional information about the extra
# configuration options for tuning the driver.

Section "Device"
        Identifier      "Allwinner A10/A13 FBDEV"
        Driver          "fbturbo"
        Option          "fbdev" "/dev/fb1"

        Option          "SwapbuffersWait" "true"
EndSection

fb0 durch fb1 ersetzt.
